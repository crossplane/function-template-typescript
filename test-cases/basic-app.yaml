---
name: Basic Application Resources
description: Test basic Deployment and Pod creation

input:
  observed:
    composite:
      resource:
        apiVersion: example.crossplane.io/v1alpha1
        kind: App
        metadata:
          name: test-app
          namespace: default
        spec:
          parameters:
            name: test-app

expected:
  resourceCount: 2
  resourceTypes:
    - Deployment
    - Pod

  resources:
    deployment:
      kind: Deployment
      apiVersion: apps/v1
      metadata:
        namespace: foo
      spec:
        replicas: 3
        selector:
          matchLabels:
            app: my-app
        template:
          metadata:
            labels:
              app: my-app
          spec:
            containers:
              - name: my-container
                image: my-image:latest
                ports:
                  - containerPort: 80

    pod:
      kind: Pod
      apiVersion: v1
      metadata:
        namespace: default
      spec:
        containers: []
